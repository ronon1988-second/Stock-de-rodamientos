
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's public profile information.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        }
      },
      "required": ["uid", "email"]
    },
    "UserRole": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Role",
      "type": "object",
      "description": "Represents a user's role in the application, stored in a specific collection.",
      "properties": {
        "role": {
          "type": "string",
          "description": "The user's role.",
          "enum": ["admin", "editor", "user"]
        }
      },
      "required": ["role"]
    },
    "Sector": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Sector",
      "type": "object",
      "description": "Represents a physical or logical area in the plant.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the sector."
        }
      },
      "required": ["name"]
    },
    "Machine": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Machine",
      "type": "object",
      "description": "Represents a machine within a sector.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the machine."
        },
        "sectorId": {
          "type": "string",
          "description": "The ID of the sector this machine belongs to."
        }
      },
      "required": ["name", "sectorId"]
    },
    "InventoryItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "InventoryItem",
      "type": "object",
      "description": "Represents a specific type of item in the inventory.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The unique name or code of the item."
        },
        "stock": {
          "type": "number",
          "description": "The current quantity in stock."
        },
        "threshold": {
          "type": "number",
          "description": "The minimum quantity of this item that should be in stock."
        }
      },
      "required": ["name", "stock", "threshold"]
    },
    "MachineAssignment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MachineAssignment",
      "type": "object",
      "description": "Represents the assignment of a specific quantity of an inventory item to a machine.",
      "properties": {
        "sectorId": {
          "type": "string",
          "description": "Reference to the Sector's ID."
        },
        "machineId": {
          "type": "string",
          "description": "Reference to the Machine's ID."
        },
        "itemId": {
          "type": "string",
          "description": "Reference to the InventoryItem's ID."
        },
        "itemName": {
          "type": "string",
          "description": "Denormalized name of the item for easier display."
        },
        "quantity": {
          "type": "number",
          "description": "The quantity of the item assigned to the machine."
        }
      },
      "required": ["sectorId", "machineId", "itemId", "itemName", "quantity"]
    },
    "UsageLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UsageLog",
      "type": "object",
      "description": "Logs when an inventory item is used.",
      "properties": {
        "itemId": {
          "type": "string"
        },
        "itemName": {
          "type": "string"
        },
        "quantity": {
          "type": "number"
        },
        "date": {
          "type": "string",
          "format": "date-time"
        },
        "sectorId": {
          "type": "string"
        },
        "machineId": {
          "type": "string"
        }
      },
      "required": ["itemId", "itemName", "quantity", "date", "sectorId", "machineId"]
    }
  },
  "auth": {
    "providers": ["password"],
    "customClaims": {
      "admin": {
        "type": "boolean"
      },
      "editor": {
        "type": "boolean"
      }
    }
  },
  "firestore": {
    "/inventory/{itemId}": {
      "schema": {
        "$ref": "#/entities/InventoryItem"
      },
      "description": "Global inventory of all available items."
    },
    "/sectors/{sectorId}": {
      "schema": {
        "$ref": "#/entities/Sector"
      },
      "description": "Top-level organizational units of the plant."
    },
    "/sectors/{sectorId}/machines/{machineId}": {
      "schema": {
        "$ref": "#/entities/Machine"
      },
      "description": "Machines belonging to a specific sector."
    },
    "/machineAssignments/{assignmentId}": {
      "schema": {
        "$ref": "#/entities/MachineAssignment"
      },
      "description": "Associates inventory items with specific machines."
    },
    "/usageLog/{logId}": {
      "schema": {
        "$ref": "#/entities/UsageLog"
      },
      "description": "Historical log of all item usage."
    },
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores public profile information for each user."
    },
    "/roles/{userId}": {
      "schema": {
        "$ref": "#/entities/UserRole"
      },
      "description": "Stores the role for each user, separate from their profile."
    }
  }
}
